(function(window){class ImagesViewer{constructor(){const _this=this;_this.holder=null;const styles=`\n        .image-viewer-backdrop {\n          position: fixed;\n          left: 0;\n          right: 0;\n          top: 0;\n          bottom: 0;\n          background-color: black;\n          z-index: 10000;\n          opacity: 0.75;\n        }\n        .image-viewer-container {\n          position: fixed;\n          left: 20px;\n          right: 20px;\n          top: 20px;\n          bottom: 20px;\n          background-color: white;\n          z-index: 10001;\n          border-top-left-radius: 5px;\n          border-top-right-radius: 5px;\n          background-color: black;\n        }\n        .image-viewer-current-image {\n          position: absolute;\n          left: 40px;\n          right: 40px;\n          top: 0;\n          bottom: 120px;\n          background-position: center;\n          background-repeat: no-repeat;\n          background-size: contain;\n          border-top-left-radius: 5px;\n          border-top-right-radius: 5px;\n        }\n        .image-viewer-current-image iframe {\n          position: absolute;\n          left: 0;\n          top: 0;\n          width: 100%;\n          height: 100%;\n        }\n        .image-viewer-images {\n          position: absolute;\n          left: 0;\n          right: 0;\n          bottom: 0;\n          height: 120px;\n          overflow-x: auto;\n          white-space: nowrap;\n          background-color: black;\n          border-top: 1px solid #888;\n          display: flex;\n        }\n        .image-viewer-title {\n          position: absolute;\n          bottom: 0;\n          right: 2px;\n          background-color: #222;\n          color: white;\n          font-size: 20px;\n          padding: 5px;\n          padding-left: 10px;\n          padding-right: 10px;\n          opacity: 0.75;\n          color: white;\n        }\n        .image-viewer-index {\n          position: absolute;\n          top: 0;\n          right: 2px;\n          background-color: #222;\n          color: white;\n          font-size: 20px;\n          padding: 5px;\n          padding-left: 10px;\n          padding-right: 10px;\n          opacity: 0.75;\n          color: white;\n        }\n        .action-image-viewer-close-viewer {\n          position: absolute;\n          right: -40px;\n          top: 0;\n          width: 40px;\n          height: 40px;\n          background-color: #222;\n          text-align: center;\n          display: flex;\n          justify-content: center;\n          align-content: center;\n          flex-direction: column;\n          opacity: 0.75;\n          color: white;\n          border-top-right-radius: 5px;\n        }\n        .action-image-viewer-prev-image {\n          position: absolute;\n          left: -40px;\n          bottom: 0;\n          width: 40px;\n          top: 0;\n          background-color: #222;\n          text-align: center;\n          display: flex;\n          justify-content: center;\n          align-content: center;\n          flex-direction: column;\n          opacity: 0.75;\n          color: white;\n          border-top-left-radius: 5px;\n        }\n        .action-image-viewer-next-image {\n          position:absolute;\n          right: -40px;\n          bottom: 0;\n          width: 40px;\n          top: 42px;\n          background-color: #222;\n          text-align: center;\n          display: flex;\n          justify-content: center;\n          align-content: center;\n          flex-direction: column;\n          opacity: 0.75;\n          color: white;\n        }\n        .action-image-viewer-close-viewer:hover,\n        .action-image-viewer-prev-image:hover,\n        .action-image-viewer-next-image:hover {\n          opacity: 1;\n          color: black;\n          background-color: #AAAAAA;\n        }\n        .image-viewer-image {\n          height: 100%;\n          border: 1px solid transparent;\n        }\n        .image-viewer-image.active {\n          border: 1px solid white;\n          cursor: pointer;\n        }\n        .action-image-viewer-close-viewer,\n        .action-image-viewer-prev-image,\n        .action-image-viewer-next-image {\n          cursor: pointer;\n        }\n\n        @media (max-height: 400px) {\n          .image-viewer-images {\n            height: 60px;\n          }\n          .image-viewer-current-image {\n            bottom: 60px;\n          }\n        }\n      `;let stylesContainer=document.head.querySelectorAll("style.image-viewer");if(stylesContainer.length===0){stylesContainer=document.createElement("style");stylesContainer.className="image-viewer";stylesContainer.textContent=styles;document.head.append(stylesContainer)}_this.viewerTemplate=`\n        <div class="image-viewer-backdrop">\n        </div>\n        <div class="image-viewer-container">\n          <div class="image-viewer-current-image">\n            <iframe frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen style="display:none;">\n            </iframe>\n            <div class="image-viewer-title">\n\n            </div>\n            <div class="image-viewer-index">\n\n            </div>\n            <div class="action-image-viewer-close-viewer">\n              <i class="fas fa-times"></i>\n            </div>\n            <div class="action-image-viewer-prev-image" >\n              <i class="fas fa-chevron-left"></i>\n            </div>\n            <div class="action-image-viewer-next-image">\n              <i class="fas fa-chevron-right"></i>\n            </div>\n          </div>\n          <div class="image-viewer-images">\n          </div>\n        </div>\n      `;const handledKeyCodes=["ArrowRight","ArrowLeft","Escape","Enter"];document.addEventListener("keydown",(evt=>{if(_this.holder&&handledKeyCodes.indexOf(evt.code)!==-1){if(evt.code=="ArrowRight"){_this.activateNext()}if(evt.code=="ArrowLeft"){_this.activatePrev()}if(evt.code=="Escape"){_this.hide()}if(evt.code=="Enter"){_this.hide()}evt.preventDefault()}}),{capture:true})}hide(){const _this=this;document.body.style.overflow="";_this.holder.remove();_this.holder=null}getElementIndex(el){if(!el){return 0}let i=0;while(el=el.previousElementSibling){i++}return i}activateImage(image){const _this=this;const src=image.getAttribute("src");for(const oneImage of _this.imagesBank){oneImage.classList.remove("active")}image.classList.add("active");const curIndex=_this.getElementIndex(image)+1;_this.activeImageIndexContainer.textContent=`${curIndex}/${_this.imagesBank.length}`;const videoUrl=image.getAttribute("data-video-url");if(videoUrl){_this.currentImageContainer.style.backgroundImage="";_this.currentVideoContainer.setAttribute("src",videoUrl);_this.currentVideoContainer.style.display=""}else{_this.currentImageContainer.style.backgroundImage=`url("${src}")`;_this.currentVideoContainer.setAttribute("src","");_this.currentVideoContainer.style.display="none"}image.scrollIntoViewIfNeeded(true)}activateNext(){const _this=this;const image=_this.holder.querySelector(".image-viewer-image.active");if(image){let nextImage=image.nextElementSibling;if(!nextImage){if(_this.imagesBank.length>0){nextImage=_this.imagesBank[0]}}if(nextImage){_this.activateImage(nextImage)}}}activatePrev(){const _this=this;const image=_this.holder.querySelector(".image-viewer-image.active");if(image){let nextImage=image.previousElementSibling;if(!nextImage){if(_this.imagesBank.length>0){nextImage=_this.imagesBank[_this.imagesBank.length-1]}}if(nextImage){_this.activateImage(nextImage)}}}show(images,settings){const _this=this;let params=Object.assign({activeImage:null,title:""},settings);_this.holder=document.createElement("div");_this.holder.innerHTML=_this.viewerTemplate;_this.currentImageContainer=_this.holder.querySelector(".image-viewer-current-image");_this.currentVideoContainer=_this.currentImageContainer.querySelector("iframe");_this.activeImageIndexContainer=_this.holder.querySelector(".image-viewer-index");_this.imageViewerTitleContainer=_this.holder.querySelector(".image-viewer-title");_this.imagesContainer=_this.holder.querySelector(".image-viewer-images");_this.imageViewerTitleContainer.innerHTML=params.title;images.forEach((function(image){let img=document.createElement("img");img.classList.add("image-viewer-image");img.setAttribute("src",image.url);if(image.video_url){img.setAttribute("data-video-url",image.video_url)}_this.imagesContainer.appendChild(img)}));document.body.appendChild(_this.holder);document.body.style.overflow="hidden";_this.imagesBank=_this.holder.querySelectorAll(".image-viewer-image");let activateCandidate;if(params.activeImage){activateCandidate=_this.holder.querySelector(`.image-viewer-image[src="${params.activeImage}"]`)}if(!activateCandidate||activateCandidate.length===0){activateCandidate=_this.holder.querySelector(".image-viewer-image")}_this.activateImage(activateCandidate);for(const oneImage of _this.imagesBank){oneImage.addEventListener("click",(function(){_this.activateImage(this)}))}_this.holder.querySelector(".action-image-viewer-close-viewer").addEventListener("click",(function(){_this.hide();this.blur()}));_this.holder.querySelector(".action-image-viewer-prev-image").addEventListener("click",(function(){_this.activatePrev();this.blur()}));_this.holder.querySelector(".action-image-viewer-next-image").addEventListener("click",(function(){_this.activateNext();this.blur()}));_this.holder.querySelector(".image-viewer-backdrop").addEventListener("click",(function(){_this.hide()}));let xDown=null;let yDown=null;let swipeDirection=null;_this.currentImageContainer.addEventListener("touchstart",(function(evt){if(evt.touches){xDown=evt.touches[0].clientX;yDown=evt.touches[0].clientY}}));_this.currentImageContainer.addEventListener("touchmove",(function(evt){if(!xDown||!yDown){return}if(evt.touches){let xUp=evt.touches[0].clientX;let yUp=evt.touches[0].clientY;let xDiff=xDown-xUp;let yDiff=yDown-yUp;if(Math.abs(xDiff)>Math.abs(yDiff)){if(xDiff>0){swipeDirection="right"}else{swipeDirection="left"}}else if(yDiff>0){swipeDirection="right"}else{swipeDirection="left"}xDown=null;yDown=null}}));_this.currentImageContainer.addEventListener("touchend",(function(){if(swipeDirection=="left"){_this.activatePrev()}else if(swipeDirection=="right"){_this.activateNext()}swipeDirection=null}))}}if(typeof module!=="undefined"&&module.exports)module.exports=ImagesViewer;else window.ImagesViewer=ImagesViewer})(window);